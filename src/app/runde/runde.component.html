<p-toast position="top-center"></p-toast>

<p-confirmDialog icon="pi pi-exclamation-triangle" ></p-confirmDialog>

<p-dialog header="{{getAnzahlGewinner()}} Gewinner auswÃ¤hlen!" [(visible)]="displayGewinnerDialog" 
  [modal]="true" [responsive]="true">
       
  <div>Ergebnis: {{aktuelleRunde.ergebnis}} {{aktuelleRunde.ergebnis !== 1 ? "Punkte" : "Punkt"}}</div>
  <p-listbox [options]="aktuelleRunde.spieler" [(ngModel)]="selectedGewinner" 
    multiple="multiple" checkbox="checkbox" optionLabel="name" [showToggleAll]="false">
  </p-listbox>
  <p-footer>
      <p-button label="Ok" icon="pi pi-check" (onClick)="rundeAbgerechnet()" [disabled]="selectedGewinner.length !== getAnzahlGewinner()" ></p-button>
      <p-button label="Cancel" icon="pi pi-close" (onClick)="displayGewinnerDialog=false"  class="ui-button-secondary"></p-button>
  </p-footer>
  
</p-dialog>

<div>
  <p-button icon="pi pi-bars" routerLink="/rundenliste"></p-button>
  <p-button *ngIf="!isNochNichtGespielteRunde()" icon="pi pi-eye" (click)="rundeAbrechnen()"></p-button>
</div>
<br>
<div class="elevation">
  <p-fieldset legend="Runde Nr. {{aktuelleRunde.nr}} von {{spieltag.anzahlRunden}} ({{getStatusDerRunde()}})">
    <span *ngFor="let info of getRundenInfo()"  class="info"><i class="pi pi-caret-right"></i>{{info}} </span> 
    <div *ngIf="!isNochNichtGespielteRunde()" class="info">{{getPunktestand()}}</div> 
  </p-fieldset>

  <p-fieldset legend="Angesagt">
    <div>
      <p-dropdown [options]="moeglicheReAnsagen" [(ngModel)]="aktuelleRunde.reAngesagt"></p-dropdown>
      <p-checkbox [(ngModel)]="aktuelleRunde.reVonVorneHerein" label="von vorneherein" binary="true"></p-checkbox>
    </div>
    <div>
      <p-dropdown [options]="moeglicheKontraAnsagen" [(ngModel)]="aktuelleRunde.kontraAngesagt"></p-dropdown>
      <p-checkbox [(ngModel)]="aktuelleRunde.kontraVonVorneHerein" label="von vorneherein" binary="true"></p-checkbox>
    </div>
  </p-fieldset>
  <p-fieldset legend="Gespielt">
    <div>
        <p-dropdown [options]="moeglicheErgebnisse" [(ngModel)]="aktuelleRunde.gespielt"></p-dropdown>
        <span>Extrapunkte: </span> <p-spinner [readonly]="true" size="1" [(ngModel)]="aktuelleRunde.extrapunkte"></p-spinner>
    </div>
    <div>
      <p-dropdown [options]="moeglicheSoli" [(ngModel)]="aktuelleRunde.solo" optionLabel="name"></p-dropdown>
      <p-checkbox [(ngModel)]="aktuelleRunde.armut" label="Armut" binary="true"></p-checkbox>  
      <p-checkbox [(ngModel)]="aktuelleRunde.gegenDieSau" label="gegen die Sau" binary="true"></p-checkbox>
    </div>
  </p-fieldset>
  <br>
</div>
